<html>
 <head>
   <title>Link Builder</title>
   
   <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
 </head>
<h1>Christmas Card Link Builder</h1>

Name:<br>
<input type="text" name="name" id="name" placeholder="Thomas Family"><br><br>
Language:<br>
<input type="radio" name="lang" id="langEn" value="en" checked> English<br>
<input type="radio" name="lang" id="langFr" value="fr"> French<br>
<input type="radio" name="lang" id="langEs" value="es"> Spanish<br>
<input type="radio" name="lang" id="langDe" value="de"> German<br>
<input type="radio" name="lang" id="langNl" value="nl"> Dutch<br>

<hr style="width:20%; float:left;"><br><br>

<button onclick="buildLink()">Get Link</button><br><br>

Link:<br>
<input type="text" name="link" id="link" style="width:20%;"><br>
<button onclick="copyLink()">Copy to Clipboard</button>

<p style="color:red;" id="alert"></p>

<script>
  function buildLink() {
    let base = "https://parkerjthomas.com/seasons-greetings/index.html?";
    let name = document.getElementById("name").value; // Use `let` instead of `const`

    // Get selected language
    let lang = "";
    const langButtons = document.querySelectorAll('input[name="lang"]');
    for (const button of langButtons) {
        if (button.checked) {
            lang = button.getAttribute("value");
            break;
        }
    }

    // Replace spaces with "+" in the name
    name = name.replace(/ /g, "+"); // This is now valid

    // Build the URL
    let url = base + "name=" + name + "&lang=" + lang;

    // Set the link in the output element
    let output = document.getElementById("link");
    output.value = url;
}

    function copyLink() {
      let copyText = document.getElementById("link");

      copyText.select();
      copyText.setSelectionRange(0, 9999999);

      document.execCommand("copy");

      document.getElementById("alert").innerHTML = "Link copied succesfully!";
    }
</script>
</html>
